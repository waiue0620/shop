(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07479642"],{4848:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("Navber"),a("Alert"),a("div",{staticClass:"container content mt-4"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8"},[a("h2",{staticClass:"text-center"},[t._v("購物車內容")]),t._l(t.cart.carts,function(e){return a("ul",{key:e.id,staticClass:"cartList mt-4"},[a("li",[a("img",{staticClass:"cartList-img img-fluid",attrs:{src:e.product.imageUrl,alt:""}}),a("router-link",{attrs:{to:"/detailed/${item.id}"}},[t._v(t._s(e.product.title))]),a("p",{staticClass:"m-0"},[t._v(t._s(e.qty)+" "+t._s(e.product.unit)+" "+t._s(t._f("currency")(e.final_total)))]),a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button",disabled:t.isLoading},on:{click:function(a){return t.removeCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])],1)])})],2),a("div",{staticClass:"col-lg-4"},[a("div",{staticClass:"my-5 row justify-content-center"},[a("form",{staticClass:"px-4 w-100",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useremail"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email"},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"username"}},[t._v("收件人姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"usertel"}},[t._v("收件人電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"tel",name:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("電話欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"useraddress"}},[t._v("收件人地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",staticStyle:{height:"67px"},attrs:{name:"",id:"comment",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"input-group mb-3 input-group-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("\n                  套用優惠碼\n                ")])])]),a("div",{staticClass:"d-flex justify-content-between border mb-3 p-2"},[a("p",{staticClass:"m-0"},[t._v("小計")]),a("p",{staticClass:"m-0"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t.cart.final_total!==t.cart.total?a("div",{staticClass:"d-flex justify-content-between border border-success mb-3 p-2 text-success"},[a("p",{staticClass:"m-0"},[t._v("折扣價")]),a("p",{staticClass:"m-0"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e(),a("div",{staticClass:"text-right"},[a("button",{staticClass:"btn btn-danger",attrs:{disabled:t.isLoading}},[t._v("送出訂單")])])])])])])]),t._m(0)],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("p",{staticClass:"text-center m-0"},[t._v("資料、圖片來源皆來自網路，僅用來做為學習用途。")])])}],i=a("90b0"),n=a("56a6"),o={name:"home",components:{Navber:i["a"],Alert:n["a"]},data:function(){return{cart:{},coupon_code:"",isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart");t.isLoading=!0,this.$http.get(e).then(function(e){t.cart=e.data.data,console.log(e.data.data),t.isLoading=!1})},createOrder:function(){var t=this,e=this,a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/order");e.isLoading=!0;var s=e.form;this.$validator.validate().then(function(r){r?t.$http.post(a,{data:s}).then(function(a){a.data.success?e.$router.push("/check_order/".concat(a.data.orderId)):t.$bus.$emit("message:push",a.data.message,"danger"),console.log(a),e.isLoading=!1}):(e.isLoading=!1,t.$bus.$emit("message:push","欄位不完整","danger"))})},addCouponCode:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/coupon");t.isLoading=!0;var a={code:t.coupon_code};this.$http.post(e,{data:a}).then(function(e){t.getCart(),t.message(e),console.log(e),t.isLoading=!1,t.coupon_code=""})},removeCartItem:function(t){var e=this,a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart/").concat(t);e.isLoading=!0,this.$http.delete(a).then(function(t){e.getCart(),console.log(t),e.isLoading=!1,e.message(t)})},message:function(t){t.data.success?this.$bus.$emit("message:push",t.data.message,"success"):this.$bus.$emit("message:push",t.data.message,"danger")}},created:function(){this.getCart()}},c=o,l=(a("ff5e"),a("2877")),u=Object(l["a"])(c,s,r,!1,null,"2a1abc52",null);e["default"]=u.exports},4904:function(t,e,a){},"4a2f":function(t,e,a){"use strict";var s=a("dfbe"),r=a.n(s);r.a},"56a6":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert mt-4"},t._l(t.messages,function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+e.status},[t._v("\n    "+t._s(e.message)+"\n    "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},r=[],i=(a("ac6a"),{name:"Navbar",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout(function(){e.messages.forEach(function(a,s){a.timestamp===t&&e.messages.splice(s,1)})},5e3)}},created:function(){var t=this;t.$bus.$on("message:push",function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)})}}),n=i,o=(a("4a2f"),a("2877")),c=Object(o["a"])(n,s,r,!1,null,null,null);e["a"]=c.exports},7949:function(t,e,a){},"90b0":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top"},[a("div",{staticClass:"container"},[t._m(0),t._m(1),a("router-link",{staticClass:"px-2 d-s-none d-block order-lg-1 position-relative",attrs:{to:"/customer"}},[a("i",{staticClass:"fas fa-shopping-cart"}),a("span",{staticClass:"badge badge-pill badge-danger"},[t._v("\n          "+t._s(t.cart.carts.length)+"\n        ")])]),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav ml-auto align-items-center"},[a("li",{staticClass:"nav-item px-3"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/index"}},[t._v("首頁")])],1),a("li",{staticClass:"nav-item px-3"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/shopping"}},[t._v("商品列表")])],1),a("li",{staticClass:"nav-item mr-auto mb-0 d-none d-s-block"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/customer"}},[a("i",{staticClass:"fas fa-shopping-cart"})])],1)])])],1)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler p-0 border-0",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h1",{staticClass:"logo mb-0 mx-auto"},[a("a",{staticClass:"text-hide",attrs:{href:"#/index"}},[t._v("logo")])])}],i={name:"Navbar",data:function(){return{cart:{carts:[]}}},methods:{signout:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/logout");this.$http.post(e).then(function(e){console.log(e.data),e.data.success&&t.$router.push("/signin")})},getCart:function(){var t=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("zivue","/cart");this.$http.get(e).then(function(e){t.cart=e.data.data})}},created:function(){this.getCart()}},n=i,o=(a("e239"),a("2877")),c=Object(o["a"])(n,s,r,!1,null,"265d4462",null);e["a"]=c.exports},ac6a:function(t,e,a){for(var s=a("cadf"),r=a("0d58"),i=a("2aba"),n=a("7726"),o=a("32e9"),c=a("84f2"),l=a("2b4c"),u=l("iterator"),d=l("toStringTag"),m=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},v=r(p),f=0;f<v.length;f++){var g,h=v[f],C=p[h],b=n[h],_=b&&b.prototype;if(_&&(_[u]||o(_,u,m),_[d]||o(_,d,h),c[h]=m,C))for(g in s)_[g]||i(_,g,s[g],!0)}},dfbe:function(t,e,a){},e239:function(t,e,a){"use strict";var s=a("4904"),r=a.n(s);r.a},ff5e:function(t,e,a){"use strict";var s=a("7949"),r=a.n(s);r.a}}]);
//# sourceMappingURL=chunk-07479642.320634c4.js.map